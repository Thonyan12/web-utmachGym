<div class="d-flex" style="min-height: 100vh;">
  <app-productos-sidebar></app-productos-sidebar>
  
  <div class="flex-grow-1 p-4 bg-light">
    <div class="container mt-4">
      <h3 class="fw-bold m-0 mb-4" style="color: #14213d;">
        <i class="bi bi-box-seam me-2"></i> Registrar Producto
      </h3>

      <div class="card border-0 shadow-sm">
        <div class="card-body p-4">
          <form (ngSubmit)="guardar(form)" #form="ngForm" novalidate>
            <div class="mb-3">
              <label for="nombre" class="form-label">Nombre</label>
              <input type="text" class="form-control rounded-md" id="nombre" [(ngModel)]="producto.nombre_prod" name="nombre_prod" required minlength="3" #nombre="ngModel" placeholder="Ingrese el nombre del producto">
              <div class="text-danger mt-1" *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)">
                <span *ngIf="nombre.errors?.['required']">El nombre es obligatorio.</span>
                <span *ngIf="nombre.errors?.['minlength']">Debe tener al menos 3 caracteres.</span>
              </div>
            </div>

            <div class="mb-3">
              <label for="tipo" class="form-label">Tipo</label>
              <input type="text" class="form-control rounded-md" id="tipo" [(ngModel)]="producto.tipo_prod" name="tipo_prod" required minlength="3" #tipo="ngModel" placeholder="Ej: Suplemento, Accesorio, etc.">
              <div class="text-danger mt-1" *ngIf="tipo.invalid && (tipo.dirty || tipo.touched)">
                <span *ngIf="tipo.errors?.['required']">El tipo es obligatorio.</span>
                <span *ngIf="tipo.errors?.['minlength']">Debe tener al menos 3 caracteres.</span>
              </div>
            </div>

            <div class="mb-3">
              <label for="precio" class="form-label">Precio</label>
              <input type="number" class="form-control rounded-md" id="precio" [(ngModel)]="producto.precio_prod" name="precio_prod" required step="0.01" min="0.01" #precio="ngModel" placeholder="0.00">
              <div class="text-danger mt-1" *ngIf="precio.invalid && (precio.dirty || precio.touched)">
                <span *ngIf="precio.errors?.['required']">El precio es obligatorio.</span>
                <span *ngIf="precio.errors?.['min']">Debe ser mayor a 0.</span>
              </div>
            </div>

            <div class="mb-3">
              <label for="stock" class="form-label">Stock</label>
              <input type="number" class="form-control rounded-md" id="stock" [(ngModel)]="producto.stock" name="stock" required min="0" #stock="ngModel" placeholder="0">
              <div class="text-danger mt-1" *ngIf="stock.invalid && (stock.dirty || stock.touched)">
                <span *ngIf="stock.errors?.['required']">El stock es obligatorio.</span>
                <span *ngIf="stock.errors?.['min']">No puede ser negativo.</span>
              </div>
            </div>

            <div *ngIf="form.invalid && form.submitted" class="alert alert-danger rounded-md">
              Por favor, corrige los errores antes de guardar el producto.
            </div>

            <div class="d-flex justify-content-end gap-2 mt-4">
              <button type="button" class="btn btn-secondary rounded-md" routerLink="/admin/productos">
                <i class="bi bi-arrow-left me-1"></i> Volver
              </button>
              <button type="submit" class="btn btn-primary rounded-md" [disabled]="form.invalid" style="background-color: #14213d; border-color: #14213d;">
                <i class="bi bi-save me-1"></i> Guardar Producto
              </button>
            </div>

            <div class="mt-3 text-center" *ngIf="mensaje">
              <div [class]="'alert rounded-md ' + (mensaje.includes('Ã©xito') ? 'alert-success' : 'alert-danger')">
                {{ mensaje }}
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
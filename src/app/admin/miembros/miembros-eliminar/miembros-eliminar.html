<div class="d-flex" style="min-height: 100vh;">
  <app-miembros-sidebar></app-miembros-sidebar>
  <div class="container mt-4">
    <h2 class="mb-4">
      <i class="bi bi-trash"></i> Eliminar Miembro
    </h2>

    <div class="card shadow-sm">
      <div class="card-body">
        <div class="row mb-3">
          <div class="col-md-9">
            <label class="form-label fw-semibold">Buscar por Cédula o Nombre</label>
            <div style="position: relative;">
              <input 
                [(ngModel)]="busqueda" 
                (input)="filtrarMiembros()"
                name="busqueda" 
                type="text" 
                class="form-control" 
                placeholder="Escribe para buscar..."
                autocomplete="off">
              
              <div *ngIf="mostrarSugerencias" class="suggestions-dropdown">
                <div 
                  *ngFor="let m of miembrosFiltrados"
                  class="suggestion-item"
                  (click)="seleccionarMiembro(m)">
                  <div class="fw-semibold">{{ m.nombre }} {{ m.apellido1 }} {{ m.apellido2 }}</div>
                  <small class="text-muted">Cédula: {{ m.cedula }} - ID: {{ m.id_miembro }}</small>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3 d-flex align-items-end">
            <button class="btn btn-search-dark w-100" (click)="buscar()" [disabled]="!busqueda.trim()">
              <i class="bi bi-search"></i> Buscar
            </button>
          </div>
        </div>

        <div *ngIf="miembro" class="alert alert-light border">
          <h5 class="mb-3"><i class="bi bi-info-circle"></i> Miembro encontrado:</h5>
          <div class="row">
            <div class="col-md-6">
              <p class="mb-2"><strong>ID:</strong> {{ miembro.id_miembro }}</p>
              <p class="mb-2"><strong>Cédula:</strong> {{ miembro.cedula }}</p>
              <p class="mb-2"><strong>Nombre:</strong> {{ miembro.nombre }} {{ miembro.apellido1 }} {{ miembro.apellido2 }}</p>
            </div>
            <div class="col-md-6">
              <p class="mb-2"><strong>Email:</strong> {{ miembro.correo }}</p>
              <p class="mb-2"><strong>Edad:</strong> {{ miembro.edad }} años</p>
              <p class="mb-2">
                <strong>Estado:</strong> 
                <span [class]="miembro.estado ? 'badge bg-success' : 'badge bg-secondary'">
                  {{ miembro.estado ? 'Activo' : 'Inactivo' }}
                </span>
              </p>
            </div>
          </div>
        </div>

        <div *ngIf="mostrarConfirmacion" class="alert alert-warning border-warning">
          <h5 class="mb-3">
            <i class="bi bi-exclamation-triangle-fill"></i> 
            ¿Estás seguro de que deseas eliminar este miembro?
          </h5>
          <p class="mb-3">Esta acción no se puede deshacer. El miembro "{{ miembro?.nombre }} {{ miembro?.apellido1 }}" será eliminado permanentemente del sistema.</p>
          <button class="btn btn-danger me-2" (click)="eliminar()">
            <i class="bi bi-trash"></i> Sí, eliminar
          </button>
          <button class="btn btn-secondary" (click)="cancelarEliminar()">
            <i class="bi bi-x-circle"></i> Cancelar
          </button>
        </div>

        <div *ngIf="mensaje" [class]="mensaje.includes('✅') ? 'alert alert-success' : 'alert alert-danger'" class="mt-3">
          {{ mensaje }}
        </div>

        <div class="mt-3 d-flex gap-2">
          <button class="btn btn-danger" (click)="confirmarEliminar()" [disabled]="!miembro">
            <i class="bi bi-trash"></i> Eliminar Miembro
          </button>
          <button class="btn btn-secondary" (click)="limpiarFormulario()">
            <i class="bi bi-arrow-counterclockwise"></i> Limpiar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>